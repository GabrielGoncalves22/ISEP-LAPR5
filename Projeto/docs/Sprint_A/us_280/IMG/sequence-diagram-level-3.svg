<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="861px" preserveAspectRatio="none" style="width:1545px;height:861px;background:#FFFFFF;" version="1.1" viewBox="0 0 1545 861" width="1545px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="601.875" style="stroke:#181818;stroke-width:1.0;" width="10" x="261" y="136.1797"/><rect fill="#FFFFFF" height="571.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="460" y="166.5313"/><rect fill="#FFFFFF" height="285.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="803" y="305.0625"/><rect fill="#FFFFFF" height="120.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1012" y="335.4141"/><rect fill="#FFFFFF" height="66.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1012" y="486.4688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="196.8828"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="426.1172"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="590.5234"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1476.5" y="365.7656"/><rect fill="#FFFFFF" height="36.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1476.5" y="516.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="265.5" x2="265.5" y1="103.8281" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="464.5" x2="464.5" y1="103.8281" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="608.5" x2="608.5" y1="647.4375" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="808" x2="808" y1="103.8281" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1016.5" x2="1016.5" y1="103.8281" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1245.5" x2="1245.5" y1="103.8281" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1362" x2="1362" y1="253.7969" y2="747.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1481" x2="1481" y1="103.8281" y2="747.0547"/><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="215.5" y="53.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="243" y="75.1426">«Web»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="222.5" y="92.752">buildingRoute</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="215.5" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="243" y="767.5879">«Web»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="222.5" y="785.1973">buildingRoute</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="419.5" y="65.5332">«Controllers»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="402.5" y="83.1426">buildingController :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="408.5" y="100.752">buildingController</text><ellipse cx="465" cy="35" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="461,23,467,18,465,23,467,28,461,23" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="419.5" y="760.5879">«Controllers»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="402.5" y="778.1973">buildingController :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="408.5" y="795.8066">buildingController</text><ellipse cx="465" cy="814.8828" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="461,802.8828,467,797.8828,465,802.8828,467,807.8828,461,802.8828" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="537.5" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="586" y="767.5879">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="544.5" y="785.1973">elevatorDTOResult :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="570" y="802.8066">ElevatorDTO</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="749" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="765.5" y="57.5332">«Use Cases»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="756" y="75.1426">buildingService :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="762" y="92.752">buildingService</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="749" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="765.5" y="767.5879">«Use Cases»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="756" y="785.1973">buildingService :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="762" y="802.8066">buildingService</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="975" y="65.5332">«Gateways»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="968.5" y="83.1426">buildingRepo :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="974.5" y="100.752">buildingRepo</text><path d="M999,15 C999,5 1017,5 1017,5 C1017,5 1035,5 1035,15 L1035,41 C1035,51 1017,51 1017,51 C1017,51 999,51 999,41 L999,15 " fill="#E3E3E3" style="stroke:#181818;stroke-width:1.5;"/><path d="M999,15 C999,25 1017,25 1017,25 C1017,25 1035,25 1035,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="975" y="760.5879">«Gateways»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="968.5" y="778.1973">buildingRepo :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="974.5" y="795.8066">buildingRepo</text><path d="M999,808.8828 C999,798.8828 1017,798.8828 1017,798.8828 C1017,798.8828 1035,798.8828 1035,808.8828 L1035,834.8828 C1035,844.8828 1017,844.8828 1017,844.8828 C1017,844.8828 999,844.8828 999,834.8828 L999,808.8828 " fill="#E3E3E3" style="stroke:#181818;stroke-width:1.5;"/><path d="M999,808.8828 C999,818.8828 1017,818.8828 1017,818.8828 C1017,818.8828 1035,818.8828 1035,808.8828 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1200.5" y="53.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="1213.5" y="75.1426">«Mapper»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1207.5" y="92.752">BuildingMap</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="1200.5" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="65" x="1213.5" y="767.5879">«Mapper»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1207.5" y="785.1973">BuildingMap</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1311" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="1339.5" y="767.5879">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1318" y="785.1973">elevatorDTO :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1323.5" y="802.8066">ElevatorDTO</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1424" y="53.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67" x="1448" y="75.1426">«Schema»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1431" y="92.752">BuildingSchema</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1424" y="746.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67" x="1448" y="767.5879">«Schema»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1431" y="785.1973">BuildingSchema</text><rect fill="#FFFFFF" height="601.875" style="stroke:#181818;stroke-width:1.0;" width="10" x="261" y="136.1797"/><rect fill="#FFFFFF" height="571.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="460" y="166.5313"/><rect fill="#FFFFFF" height="285.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="803" y="305.0625"/><rect fill="#FFFFFF" height="120.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1012" y="335.4141"/><rect fill="#FFFFFF" height="66.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1012" y="486.4688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="196.8828"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="426.1172"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241" y="590.5234"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1476.5" y="365.7656"/><rect fill="#FFFFFF" height="36.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1476.5" y="516.8203"/><ellipse cx="4.5" cy="135.4297" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="249,132.1797,259,136.1797,249,140.1797,253,136.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="9" x2="255" y1="136.1797" y2="136.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="12" y="131.3232">PUT/PATCH(../buildings/:code/elevators)</text><polygon fill="#181818" points="448,162.5313,458,166.5313,448,170.5313,452,166.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="454" y1="166.5313" y2="166.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="278" y="161.6748">updateElevator(req, res, next)</text><polygon fill="#181818" points="1229,192.8828,1239,196.8828,1229,200.8828,1233,196.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="470" x2="1235" y1="196.8828" y2="196.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="477" y="192.0264">toDto(req.body)</text><polygon fill="#181818" points="1299,223.2344,1309,227.2344,1299,231.2344,1303,227.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1246" x2="1305" y1="227.2344" y2="227.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1253" y="222.3779">create</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1311" y="204.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="1339.5" y="226.416">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1318" y="244.0254">elevatorDTO :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1323.5" y="261.6348">ElevatorDTO</text><polygon fill="#181818" points="791,301.0625,801,305.0625,791,309.0625,795,305.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="470" x2="797" y1="305.0625" y2="305.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314" x="477" y="300.2061">updateElevator(code, elevatorDTO): elevatorDTOResult</text><polygon fill="#181818" points="1000,331.4141,1010,335.4141,1000,339.4141,1004,335.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="813" x2="1006" y1="335.4141" y2="335.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="820" y="330.5576">findElevator(code): elevator</text><polygon fill="#181818" points="1464.5,361.7656,1474.5,365.7656,1464.5,369.7656,1468.5,365.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1022" x2="1470.5" y1="365.7656" y2="365.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1029" y="360.9092">findOne(query: code): elevatorRecord</text><polygon fill="#181818" points="1229,422.1172,1239,426.1172,1229,430.1172,1233,426.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1022" x2="1235" y1="426.1172" y2="426.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1029" y="421.2607">toDomain(elevatorRecord): elevator</text><polygon fill="#181818" points="1000,482.4688,1010,486.4688,1000,490.4688,1004,486.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="813" x2="1006" y1="486.4688" y2="486.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="820" y="481.6123">update(elevator): elevatorResult</text><polygon fill="#181818" points="1464.5,512.8203,1474.5,516.8203,1464.5,520.8203,1468.5,516.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1022" x2="1470.5" y1="516.8203" y2="516.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1029" y="511.9639">findOne(query: code)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1486.5" x2="1528.5" y1="552.1719" y2="552.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1528.5" x2="1528.5" y1="552.1719" y2="565.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1481.5" x2="1528.5" y1="565.1719" y2="565.1719"/><polygon fill="#181818" points="1491.5,561.1719,1481.5,565.1719,1491.5,569.1719,1487.5,565.1719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="1493.5" y="547.3154">save()</text><polygon fill="#181818" points="1229,586.5234,1239,590.5234,1229,594.5234,1233,590.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="808" x2="1235" y1="590.5234" y2="590.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="815" y="585.667">toDTO(elevatorResult)</text><polygon fill="#181818" points="691.5,616.875,681.5,620.875,691.5,624.875,687.5,620.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="685.5" x2="1245" y1="620.875" y2="620.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="697.5" y="616.0186">create</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="537.5" y="598.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="586" y="620.0566">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="544.5" y="637.666">elevatorDTOResult :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="570" y="655.2754">ElevatorDTO</text><polygon fill="#181818" points="282,694.7031,272,698.7031,282,702.7031,278,698.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="459" y1="698.7031" y2="698.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="288" y="693.8467">response</text><polygon fill="#181818" points="11,725.0547,1,729.0547,11,733.0547,7,729.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="260" y1="729.0547" y2="729.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="17" y="724.1982">status: 201 dados alterados</text><!--MD5=[09df121bb27036531f8a709090338e53]
@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false


participant buildingRoute as route <<Web>>
control "buildingController :\n buildingController" as controller <<Controllers>>
participant "elevatorDTOResult :\n ElevatorDTO" as dtoResult <<DTO>>
participant "buildingService :\n buildingService" as service <<Use Cases>>
database "buildingRepo :\n buildingRepo" as repo <<Gateways>>
participant BuildingMap as map <<Mapper>>
participant "elevatorDTO :\n ElevatorDTO" as dto <<DTO>>
participant "BuildingSchema" as schema <<Schema>>

?o-> route: PUT/PATCH(../buildings/:code/elevators)
activate route

route -> controller: updateElevator(req, res, next)
activate controller

controller -> map: toDto(req.body)


activate map
map - -> dto**: create
deactivate map

controller -> service: updateElevator(code, elevatorDTO): elevatorDTOResult
activate service
service -> repo: findElevator(code): elevator


activate repo

repo -> schema: findOne(query: code): elevatorRecord
activate schema
deactivate schema
repo -> map: toDomain(elevatorRecord): elevator
activate map
deactivate map
deactivate repo

service -> repo: update(elevator): elevatorResult
activate repo
repo -> schema: findOne(query: code)

activate schema
schema -> schema: save()
deactivate schema

deactivate repo

service -> map: toDTO(elevatorResult)
deactivate service

activate map
map - -> dtoResult**: create
deactivate map

controller -> route: response

<- - route : status: 201 dados alterados


@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>