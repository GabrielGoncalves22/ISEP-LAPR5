<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="623px" preserveAspectRatio="none" style="width:1044px;height:623px;background:#FFFFFF;" version="1.1" viewBox="0 0 1044 623" width="1044px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="402" x="320" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="392" x="325" y="29.5332">Sequence Diagram (Level 3 - Process View - MD) - US 80</text><rect fill="#FFFFFF" height="390.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="189" y="143.7891"/><rect fill="#FFFFFF" height="329.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="360" y="174.1406"/><rect fill="#FFFFFF" height="253.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="365" y="212.4922"/><rect fill="#FFFFFF" height="182.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="640" y="247.8438"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="872" y="308.5469"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="987" y="338.8984"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194" x2="194" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="365" x2="365" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="520" x2="520" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="645" x2="645" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="769" x2="769" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="877" x2="877" y1="111.4375" y2="552.0078"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="992" x2="992" y1="111.4375" y2="552.0078"/><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="154" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54" x="167" y="82.752">«Route»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="161" y="100.3613">userRoute</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="154" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54" x="167" y="572.541">«Route»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="161" y="590.1504">userRoute</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="309" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="326" y="65.1426">«Controller»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="351.5" y="82.752">ctrl :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="320" y="100.3613">IUserController</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="309" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="326" y="572.541">«Controller»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="351.5" y="590.1504">ctrl :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="320" y="607.7598">IUserController</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="480" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="497" y="65.1426">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="487" y="82.752">userDTO :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="491" y="100.3613">IUserDTO</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="480" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="46" x="497" y="572.541">«DTO»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="487" y="590.1504">userDTO :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="491" y="607.7598">IUserDTO</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="570" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="614" y="65.1426">«Service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="577" y="82.752">userServiceInstance :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="607.5" y="100.3613">IUserService</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="570" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="614" y="572.541">«Service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="577" y="590.1504">userServiceInstance :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="607.5" y="607.7598">IUserService</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="730" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="737" y="65.1426">«Domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="751" y="82.752">user :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="757" y="100.3613">user</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="730" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="737" y="572.541">«Domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="751" y="590.1504">user :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="757" y="607.7598">user</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="818" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="835" y="65.1426">«Repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="842" y="82.752">userRepo :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="829" y="100.3613">IUserRepository</text><rect fill="#E3E3E3" height="66.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="818" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="835" y="572.541">«Repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="842" y="590.1504">userRepo :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="829" y="607.7598">IUserRepository</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="946" y="61.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="953" y="82.752">«DataBase»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="982.5" y="100.3613">DB</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="946" y="551.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="953" y="572.541">«DataBase»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="982.5" y="590.1504">DB</text><rect fill="#FFFFFF" height="390.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="189" y="143.7891"/><rect fill="#FFFFFF" height="329.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="360" y="174.1406"/><rect fill="#FFFFFF" height="253.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="365" y="212.4922"/><rect fill="#FFFFFF" height="182.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="640" y="247.8438"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="872" y="308.5469"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="987" y="338.8984"/><ellipse cx="4.5" cy="143.0391" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="177,139.7891,187,143.7891,177,147.7891,181,143.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="9" x2="183" y1="143.7891" y2="143.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="138.9326">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="23" y="138.9326">PATCH (.../users/activate)</text><polygon fill="#181818" points="348,170.1406,358,174.1406,348,178.1406,352,174.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="354" y1="174.1406" y2="174.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="206" y="169.2842">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="217" y="169.2842">execute(req, res, next)</text><line style="stroke:#181818;stroke-width:1.0;" x1="370" x2="417" y1="199.4922" y2="199.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="417" x2="417" y1="199.4922" y2="212.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="376" x2="417" y1="212.4922" y2="212.4922"/><polygon fill="#181818" points="386,208.4922,376,212.4922,386,216.4922,382,212.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="382" y="194.6357">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="393" y="194.6357">toggle(req, res, next)</text><polygon fill="#181818" points="628,243.8438,638,247.8438,628,251.8438,632,247.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="375" x2="634" y1="247.8438" y2="247.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="382" y="242.9873">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="393" y="242.9873">toggle(userDTO)</text><polygon fill="#181818" points="865,274.1953,875,278.1953,865,282.1953,869,278.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="650" x2="871" y1="278.1953" y2="278.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657" y="273.3389">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="668" y="273.3389">find(user)</text><polygon fill="#181818" points="860,304.5469,870,308.5469,860,312.5469,864,308.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="650" x2="866" y1="308.5469" y2="308.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657" y="303.6904">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="668" y="303.6904">update(user)</text><polygon fill="#181818" points="975,334.8984,985,338.8984,975,342.8984,979,338.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="882" x2="981" y1="338.8984" y2="338.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="889" y="334.042">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="900" y="334.042">update(user)</text><polygon fill="#181818" points="893,365.25,883,369.25,893,373.25,889,369.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="887" x2="991" y1="369.25" y2="369.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="899" y="364.3936">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="910" y="364.3936"> </text><polygon fill="#181818" points="661,395.6016,651,399.6016,661,403.6016,657,399.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655" x2="876" y1="399.6016" y2="399.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="667" y="394.7451">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="678" y="394.7451"> </text><polygon fill="#181818" points="386,425.9531,376,429.9531,386,433.9531,382,429.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="380" x2="644" y1="429.9531" y2="429.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="392" y="425.0967">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="410" y="425.0967"> </text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="375" x2="417" y1="465.3047" y2="465.3047"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="417" x2="417" y1="465.3047" y2="478.3047"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="370" x2="417" y1="478.3047" y2="478.3047"/><polygon fill="#181818" points="380,474.3047,370,478.3047,380,482.3047,376,478.3047" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="382" y="460.4482">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="400" y="460.4482">status: 201/400</text><polygon fill="#181818" points="210,499.6563,200,503.6563,210,507.6563,206,503.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="204" x2="364" y1="503.6563" y2="503.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="216" y="498.7998">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="234" y="498.7998">status: 200/400</text><polygon fill="#181818" points="11,530.0078,1,534.0078,11,538.0078,7,534.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="193" y1="534.0078" y2="534.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="529.1514">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="35" y="529.1514">status: 200/400</text><!--MD5=[244d7ef82cd3432f8de5ff5bfe3171be]
@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title Sequence Diagram (Level 3 - Process View - MD) - US 80
autonumber

participant "userRoute" as Route <<Route>>
participant "ctrl :\n IUserController" as Controller <<Controller>>
participant "userDTO :\n IUserDTO" as UserDTO <<DTO>>
participant "userServiceInstance :\n IUserService" as Service <<Service>>
participant "user :\n user" as User <<Domain>>
participant "userRepo :\n IUserRepository" as Repo <<Repository>>
participant "DB" as DB <<DataBase>>

?o-> Route : PATCH (.../users/activate)
activate Route

    Route -> Controller : execute(req, res, next)
    activate Controller
        Controller -> Controller : toggle(req, res, next)
        activate Controller
            Controller -> Service : toggle(userDTO)

            activate Service
                Service -> Repo : find(user)
                Service -> Repo : update(user)
                activate Repo
                    Repo -> DB : update(user)
                    activate DB
                    DB - -> Repo :
                    deactivate DB
                    Repo - -> Service :
                deactivate Repo
                Service - -> Controller :
            deactivate Service

            Controller - -> Controller : status: 201/400
        deactivate Controller
    Controller - -> Route : status: 200/400
    deactivate Controller

<- - Route : status: 200/400
deactivate Route

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>